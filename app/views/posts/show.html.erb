<div id="post-list" class="container">
  <%= render partial: 'users/big', locals: { user: @user } %>

  <hr class="featurette-divider">
  <% if current_user == @user %>
    <div class="d-flex justify-content-center">
      <%= link_to 'Edit post', edit_post_path(@post), class: 'btn btn-primary', style: 'width: 50%' %>
    </div><br />
    <div class="d-flex justify-content-center">
      <%= link_to 'Delete post', post_path(@post), method: :delete, data: { confirm: 'Are you sure?' }, class: 'btn btn-danger', style: 'width: 50%' %>
    </div><br />
  <% end %>

  <div class="col">
    <div id="post-<%= @post.id %>" class="card post-buttons-parent">
      <% if @post.picture.representable? %>
        <%= image_tag @post.picture %>
      <% end %>
      <div class="card-body">
        <p class="card-text"><%= @post.body %></p>
        <% if @user != current_user %>
          <%= link_to @user.full_name, profile_path(@user) %>
        <% end %>
      </div>

      <div id="post-comments-<%= @post.id %>">
        <%= turbo_frame_tag([:turbo_comments_container, @post.id], class: "", target: "_top") do %>
          <%= turbo_frame_tag([:comments, "1_#{@post.id}"], class: "", target:"_top",
                              src: comments_path(post_id: @post.id, items: 12), loading: 'lazy')  do %>
          <% end %>
        <% end %>
      </div>
    </div>
  </div>

  <hr class="featurette-divider">

  <%= render partial: 'stories/stories', locals: { author: @post.user, stories: @stories, partial_message: 'Connected stories:' } %>

</div>
